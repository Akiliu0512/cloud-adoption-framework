---
title: Perimeter networks
description: See how the Cloud Adoption Framework for Azure helps you set up perimeter networks effectively for your organization.
author: tracsman
ms.author: martinek
ms.date: 01/09/2023
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.custom: think-tank, virtual-network
---

# Perimeter networks

Perimeter networks, also called demilitarized zones (DMZs), help provide secure connectivity between cloud networks, on-premises or physical datacenter networks, and the internet. 

In effective perimeter networks, incoming packets flow through security appliances that are hosted in secure subnets. This process happens before packets can reach backend servers. Security appliances include firewalls, network virtual appliances (NVAs), and other intrusion detection and prevention systems.

Internet-bound packets from workloads must also flow through security appliances in the perimeter network before they can leave the network. The perimeter network can provide policy enforcement, inspection, and auditing.

Perimeter networks use the following Azure features and services:

- [Virtual networks][virtual-networks], [user-defined routes][user-defined-routes], and [network security groups][network-security-groups]
- [Azure Application Gateway][appgw] with [Web Application Firewall (WAF)][appgwwaf]
- [Azure Firewall][azure-firewall]
- [Other network virtual appliances (NVAs)][network-virtual-appliances]
- [Azure Web Application Firewall on Azure Front Door][afdwaf]
- [Azure Load Balancer][alb]
- [Public IP addresses][public-ip]

Central IT teams and security teams are usually responsible for defining operational requirements for perimeter networks. Azure reference architectures provide example templates that you can use to implement your own perimeter networks:

- [Implement a perimeter network between Azure and your on-premises datacenter](/azure/architecture/reference-architectures/dmz/secure-vnet-dmz)
- [Implement a perimeter network between Azure and the internet](/azure/architecture/reference-architectures/dmz/secure-vnet-dmz?toc=/azure/cloud-adoption-framework/toc.json&bc=/azure/cloud-adoption-framework/_bread/toc.json)
For more information, see [Perimeter networks][perimeter-network].

## Perimeter network topology

The following diagram shows an example [hub and spoke network](./hub-spoke-network-topology.md) that enforces two perimeter networks, with access to the internet and to an on-premises network.

![Diagram that shows an example of a hub and spoke network topology with two perimeter networks.](../../_images/azure-best-practices/network-high-level-perimeter-networks.png)

In this network topology, both perimeter networks are in the DMZ hub. In the DMZ hub, the perimeter network to the internet can scale up to support many lines of business. This support uses multiple farms of WAFs and Azure Firewall instances that help protect the spoke virtual networks. The hub also allows connectivity via virtual private network (VPN) or Azure ExpressRoute as needed.

## Virtual networks

Perimeter networks are typically built within [virtual networks][virtual-networks]. The virtual network uses multiple subnets to host the different types of services that filter and inspect traffic to or from other networks or the internet. These services include NVAs, WAFs, and Azure Application Gateway instances.

## User-defined routes

In a hub and spoke network topology, you must guarantee that traffic generated by virtual machines (VMs) in the spokes passes through the correct virtual appliances in the hub. This traffic routing requires [user-defined routes][user-defined-routes] in the subnets of the spokes.

User-defined routes can guarantee that traffic passes through specified custom VMs, NVAs, and load balancers. The route sets the front-end IP address of the internal load balancer as the next hop. The internal load balancer distributes the internal traffic to the virtual appliances in the load balancer backend pool.

You can use user-defined routes to deploy firewalls, intrusion detection systems, and other virtual appliances. Customers can route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection. 

## Azure Firewall

[Azure Firewall][azure-firewall] is a managed cloud-based firewall service that helps protect your Azure Virtual Network resources. Azure Firewall is a fully stateful managed firewall with built-in high availability and unrestricted cloud scalability. You can use Azure Firewall to centrally create, enforce, and log application and network connectivity policies across subscriptions and virtual networks.

Azure Firewall uses a static public IP address for virtual network resources. Outside firewalls can use the static public IP to identify traffic that originates from your virtual network. Azure Firewall works with Azure Monitor for logging and analytics.

## Network virtual appliances

You can manage perimeter networks with access to the internet through Azure Firewall or through a farm of firewalls or [web application firewalls][afdwaf].

Different lines of business use many web applications, which can suffer from various vulnerabilities and potential exploits. A web application firewall detects attacks against HTTP/S web applications in more depth than a generic firewall. Compared with traditional firewall technology, web application firewalls have a set of specific features to help protect internal web servers from threats.

An Azure Firewall instance and a [network virtual appliance][network-virtual-appliances] firewall use a common administration plane with a set of security rules. These rules help protect the workloads hosted in the spokes and control access to on-premises networks. Azure Firewall has built-in scalability, and NVA firewalls can be manually scaled behind a load balancer.

A firewall farm has less specialized software than a WAF. But it also has a broader application scope to filter and inspect any type of traffic in egress and ingress. If you use an NVA approach, you can find and deploy the software from the Azure Marketplace.

Use one set of Azure Firewall instances or NVAs for traffic that originates on the internet. Then use another set for traffic that originates on-premises. Using only one set of firewalls for both is a security risk because it provides no security perimeter between the two sets of network traffic. Using separate firewall layers reduces the complexity of checking security rules and makes clear which rules correspond to which incoming network requests.

## Azure Load Balancer

[Azure Load Balancer][alb] offers a high-availability Layer 4 (TCP/UDP) service. This service can distribute incoming traffic among service instances defined in a load-balanced set. Traffic sent to the load balancer from front-end endpoints, like public IP endpoints or private IP endpoints, can be redistributed with or without address translation to a pool of back-end IP addresses, like NVAs or VMs.

Azure Load Balancer can also probe the health of the various server instances. When an instance fails to respond to a probe, the load balancer stops sending traffic to the unhealthy instance.

As an example of using a hub and spoke network topology, you can deploy an external load balancer to both the hub and the spokes. In the hub, the load balancer efficiently routes traffic to services in the spokes. The load balancer in the spokes manages application traffic.

## Azure Front Door

[Azure Front Door][afd] is Microsoft's highly available and scalable web application acceleration platform and global HTTPS load balancer. You can use Azure Front Door to build, operate, and scale out your dynamic web application and static content. It runs in more than 100 locations at the edge of Microsoft's global network.

Azure Front Door provides your application with:

- Unified regional and stamp maintenance automation
- BCDR automation
- Unified client and user information
- Caching
- Service insights

The platform offers performance, reliability, and support SLAs. It also offers compliance certifications and auditable security practices. Azure develops, operates, and natively supports these certifications and practices.

## Azure Application Gateway

[Azure Application Gateway][appgw] is a dedicated virtual appliance that gives you a managed application delivery controller. It offers various Layer 7 load-balancing capabilities for your application.

<!-- docutune:casing "the application gateway" "single application gateway" -->

Azure Application Gateway allows you to optimize web farm productivity by offloading CPU-intensive SSL termination to the application gateway. It also provides other Layer 7 routing capabilities, such as:  

- Round-robin distribution of incoming traffic.
- Cookie-based session affinity.
- URL path-based routing.
- Hosting multiple websites behind a single application gateway.

The Azure Application Gateway WAF SKU includes a Web Application Firewall. This SKU provides protection to web applications from common web vulnerabilities and exploits. You can configure Azure Application Gateway as an internet-facing gateway, an internal-only gateway, or a combination of both.

## Public IPs

With some Azure features, you can associate service endpoints to a [public IP][public-ip] address. With this option, your resource can be accessed from the internet. This endpoint uses network address translation (NAT) to route traffic to the internal address and port on the Azure virtual network. This path is the primary way for external traffic to pass into the virtual network. You can configure public IP addresses to determine what traffic is passed in, and how and where it's translated onto the virtual network.

## Azure DDoS Protection Standard

[Azure DDoS Protection Standard][ddos] provides extra mitigation capabilities over the [basic service][ddos] tier that are tuned specifically to Azure Virtual Network resources. DDoS protection standard is simple to enable and requires no application changes.

You can tune protection policies through dedicated traffic monitoring and machine-learning algorithms. Policies are applied to public IP addresses associated to resources deployed in virtual networks. Examples include Azure Load Balancer, Application Gateway, and Service Fabric instances.

Real-time telemetry is available through Azure Monitor views both during an attack and for historical purposes. You can add application-layer protection by using the Web Application Firewall in Azure Application Gateway. Protection is provided for IPv4 Azure public IP addresses.

## Next steps

Learn how to efficiently manage common communication or security requirements by using the [hub-and-spoke network topology](hub-spoke-network-topology.md) model.

<!-- links -->

[virtual-networks]: /azure/virtual-network/virtual-networks-overview
[network-security-groups]: /azure/virtual-network/virtual-network-vnet-plan-design-arm#traffic-filtering
[user-defined-routes]: /azure/virtual-network/virtual-networks-udr-overview#user-defined
[network-virtual-appliances]: /azure/architecture/reference-architectures/dmz/nva-ha
[azure-firewall]: /azure/firewall/overview
[perimeter-network]: ../../resources/networking-vdc.md
[alb]: /azure/load-balancer/load-balancer-overview
[ddos]: /azure/ddos-protection/ddos-protection-overview
[public-ip]: /azure/virtual-network/ip-services/virtual-network-public-ip-address
[afd]: /azure/frontdoor/front-door-overview
[afdwaf]: /azure/web-application-firewall/afds/afds-overview
[appgw]: /azure/application-gateway/overview
[appgwwaf]: /azure/web-application-firewall/ag/ag-overview
