---
title: Business continuity and disaster recovery for Citrix on Azure
description: Learn how this design area can improve business continuity and disaster recovery (BCDR) for an Citrix on Azure environment.
author: bebaur
ms.author: martinek
ms.date: 01/06/2023
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: scenario
ms.custom: think-tank, e2e-avd
---

# Business Continuity and Disaster Recovery Considerations for Citrix on Azure

**Citrix design considerations**

Design considerations for Citrix technologies are summarized in [Design Decision: Disaster Recovery Planning](https://docs.citrix.com/en-us/tech-zone/design/design-decisions/cvad-disaster-recovery.html#overview) on Citrix TechZone. This guide assists with business continuity and disaster recovery (BCDR) architecture planning and considerations for both on-prem and Azure deployments of Citrix DaaS.
When deploying Citrix on Azure, it is recommended to follow the same design considerations for [optimal storage for profile and Office containers](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/scenarios/wvd/eslz-business-continuity-and-disaster-recovery#optimal-storage-for-profile-and-office-containers), [golden image availability](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/scenarios/wvd/eslz-business-continuity-and-disaster-recovery#golden-image-availability), and [infrastructure and application dependencies](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/scenarios/wvd/eslz-business-continuity-and-disaster-recovery#infrastructure-and-application-dependencies) as Azure Virtual Desktop.
As Azure VM availability is not guaranteed by default (including for reserved instances), Azure’s [on-demand capacity reservation](https://learn.microsoft.com/en-us/azure/virtual-machines/capacity-reservation-overview) feature is recommended to ensure sufficient availability within the required region(s) when most needed. 
Additional design factors for Citrix on Azure deployments are highlighted below.

**Machine catalog availability strategies**
For Citrix machine catalogs, you can deploy them in an active-active or active-passive approach using a combination of Azure and on-premises workloads. 
The below list is not all inclusive but contains key highlights. Please reference [Citrix TechZone - Disaster Recovery Options](https://docs.citrix.com/en-us/tech-zone/design/design-decisions/cvad-disaster-recovery.html) for more information.

**Active-active**
-	Continuous testing of the disaster recovery location (storage, network) is enabled.
-	A single Delivery Group can contain VMs from multiple regions however active-active business continuity strategies are complex and require a detailed understanding of the associated use cases, data, and applications. Mapping users or apps to regions through [zone preference](https://docs.citrix.com/en-us/citrix-daas/manage-deployment/zones.html#zone-preference) can help ensure they are directed to an optimal region if capacity is available.
-	To simplify the use of active-active DR with personal desktops, strategies are often employed where users are segmented and aligned to primary and secondary datacenters. In the primary, a user’s active machine is persistent and then within the secondary a pooled non-persistent machine is on standby with core applications required for DR. This pooled machine can leverage ephemeral disks to reduce storage cost requirements. Capabilities such as [OneDrive known folder redirection](https://learn.microsoft.com/sharepoint/redirect-known-folders) can be used to enable access to critical user data from both machines.
 
**Active-passive**
-	Citrix supports the deployment of persistent and non-persistent workloads. For active-passive deployments a hot standby machine catalog can be used with non-persistent workloads and [ephemeral disks](https://docs.citrix.com/en-us/citrix-daas/install-configure/resource-location/azure-resource-manager.html#azure-ephemeral-disk) to drastically reduce the cost of the deployment.
-	An active and passive catalog can be mapped to the same [Delivery Group](https://docs.citrix.com/en-us/citrix-daas/install-configure/delivery-groups-manage.html) and presented to users as a single app or desktop. [Zone preference](https://docs.citrix.com/en-us/citrix-daas/manage-deployment/zones.html#zone-preference) can then set preference for the users or application to the active region. When capacity is unavailable workloads in the passive region will initiate based off the unavailable capacity in the active region. This can be automatic using functionality such as [Autoscale](https://docs.citrix.com/en-us/citrix-daas/manage-deployment/autoscale.html) or manual by placing the passive workloads in maintenance mode and enabling them when a DR event has occurred. The method used should align with the RTO of the organizations BCDR plan.
-	Cloud bursting from on-premises to Azure is possible and can be facilitated using [Autoscale](https://docs.citrix.com/en-us/citrix-daas/manage-deployment/autoscale/autoscale-tagged-machines.html). The [Citrix image portability service](https://docs.citrix.com/en-us/citrix-daas/migrate-workloads.html#use-the-image-portability-service) can be used to maintain both an on-premises and Azure image for two machine catalogs from a single image.

**Azure feature considerations**

| Azure Feature | What is it? | Why is this important |
|----|----|----|
| [Regions](https://docs.microsoft.com/azure/availability-zones/az-overview) | Set of datacenters deployed within a latency-defined perimeter and connected through a dedicated regional low-latency network. | [Selection of an Azure Region](https://azure.microsoft.com/global-infrastructure/geographies/) should be based on proximity to existing datacenters, users, or required backend data. You should also be mindful of what services are available in the regions of choice. From a Citrix perspective, organizations often start with a single region. However, two or more regions should be considered long term for geographic redundancy in a BC/DR strategy. |
| [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-faqs) | ExpressRoute is an Azure service that lets you create private connections between Microsoft datacenters and infrastructure that is on your premises or in a colocation facility. | ExpressRoute is an essential infrastructure component bridging a Microsoft and organizations datacenter or co-location. It is often a prerequisite for an enterprise-scale Citrix deployment. <br> ExpressRoute is a shared service and bandwidth capacity planning should be conducted to determine overall bandwidth need for the enterprise. If not enough bandwidth is available it can affect user experience or access to key services in the datacenter. Additionally, ICA performance is impacted if sessions transverse the Express Route to the datacenter. |
 | [Availability Zones](https://docs.microsoft.com/azure/availability-zones/az-region) | Unique physical locations within a region. Each zone is made up of one or more datacenters equipped with independent power, cooling, and networking. | Availability Zones provide a [99.99% SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/v1_9/) and should be used for all applicable Citrix infrastructure and [machine catalogs](https://docs.citrix.com/en-us/citrix-daas/install-configure/resource-location/azure-resource-manager.html#provision-machines-into-specified-availability-zones) to provide datacenter redundancy within a region. Not all regions have Availability Zones, so it is recommended to plan accordingly. |
| [Availability Sets](https://learn.microsoft.com/en-us/azure/virtual-machines/availability-set-overview) | VMs in an availability set are spread across several fault domains. A fault domain is a group of VMs that share a common power source and network switch.  | Availability Sets provide a 99.95% SLA and should only be used for Citrix infrastructure if Availability Zones are unavailable in the region. Availability Sets only provide hardware redundancy (like hypervisor anti-affinity rules) therefore; use a multi-region strategy to provide datacenter and geographic redundancy if your required regions do not have Availability Zones. |
| [Managed Disks](https://learn.microsoft.com/en-us/azure/virtual-machines/managed-disks-overview) | Managed disks are managed by Azure and automatically placed in different storage scale units to limit the effects of hardware failure. | Managed Disks should be used for all Citrix infrastructure and VDAs. Unmanaged Disks are not recommended. For Single Instance Virtual Machines (i.e. a user’s VDI or a published application server) they have the following SLAs: <li> Premium or Ultra SSD – 99.9% <li> Standard SSD – 99.5% <li> Standard HDD – 95% <br> Each of the varying disk types have performance and cost differences. Premium is recommended for Citrix infrastructure machines. Deciding the disk type for VDAs should be a factor of cost, performance, and availability needs.|
| [Backup](https://learn.microsoft.com/en-us/azure/backup/backup-overview) | The Azure Backup service provides simple, secure, and cost-effective solutions to back up your data and recover it from the Microsoft Azure cloud. | Azure Backup is recommended for Citrix infrastructure, master image VMs, and persistent desktops. |
| [Resource Locks](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/lock-resources) | Prevent other users in your organization from accidentally deleting or modifying critical resources. | Resource Locks should be applied to all Citrix infrastructure and master image VMs. <li> Delete – Should be applied at a minimum to prevent accidental deletion of critical machines <li> Read-only – Should be applied to Citrix infrastructure machines. These objects are static where changes should only be applied during appropriate change control windows. |	

**Citrix design recommendations**
  
Design guidance for Citrix DaaS on Microsoft Azure is available on [Citrix TechZone - Design Guidance for Citrix DaaS on Microsoft Azure](https://docs.citrix.com/en-us/tech-zone/toc/by-solution/daas-for-azure/design-guidance.html) and highlights the system, workload, user, and network considerations for Citrix technologies in alignment with Cloud Adoption Framework design principles. 
  
Select Citrix components can benefit from [Azure Site Recovery](https://azure.microsoft.com/en-us/products/site-recovery/#overview) (such as the App Layering ELM appliance) to improve overall resilience. Note that core infrastructure components, such as Cloud Connectors and NetScalers, should always be deployed full-time throughout other regions. 
